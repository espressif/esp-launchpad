<!DOCTYPE html>
<html lang="en" class="h-100">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>ESP Launchpad</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="../assets/favicon.ico" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="../css/styles.css" rel="stylesheet" />
    <link href="../css/custom.css" rel="stylesheet" />
    <link href="../css/xterm.css" rel="stylesheet" />
    <link rel="stylesheet" href="./minimal_ui_styles.css" />
</head>

<body class="d-flex flex-column h-100" style="align-items: center">
    <!-- Modal for error troubleshoot starts-->
    <button type="button" id="errorTroubleshootModalToggleButton" class="btn btn-primary" data-bs-toggle="modal"
        data-bs-target="#errorTroubleshootModal" hidden>
        Error Troubleshoot Modal Toggle Button
    </button>
    <div class="modal fade" id="errorTroubleshootModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="errorTroubleshootModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="errorTroubleshootModalTitle">Connection In Progress</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" hidden></button>
                </div>
                <div class="modal-body">
                    <p id="errorMessageDescription">It's taking longer than usual for connecting the device.</p>
                    <p class="errorMessage" id="errorMessage" style="display: none;"></p>
                    <p id="troubleshootAccordionLabel">Refer to the troubleshooting guide below for assistance in resolving the issue.</p>
                    <div class="accordion" id="troubleshootAccordion">
                        <div class="accordion-item border-0">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button collapsed" style="background-color: #eee;" type="button"
                                    data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true"
                                    aria-controls="collapseOne">
                                    Troubleshooting Guide
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne"
                                data-bs-parent="#troubleshootAccordion">
                                <div class="accordion-body" style="font-size: 12px;">
                                    <div class="container mt-2">
                                        <div>
                                            <div class="col-xs-12">
                                                <div class="col-xs-12 mt-2">
                                                    <h4 class="topic mb-2" style="font-size: 14px;"><b>Device Connection
                                                            Issue</b></h4>
                                                    <p>
                                                        If your device is not shown in list that pop-up while connection
                                                        establishing step then your device might be not connected properly
                                                        to port
                                                        or their might be the
                                                        <strong>browser compatability issue</strong>. Please
                                                        ensure that it is properly connected to the port. Reseating
                                                        connection cable might also helps to resolve this issue. If your device is connected to any other application, please
                                                        disconnect it and try again.
                                                    </p>
                                                </div>
                                                <div class="col-xs-12 mt-2">
                                                    <h4 class="topic mb-2" style="font-size: 14px;">
                                                        <b>Serial Data Transmission Permission Issue</b>
                                                    </h4>
                                                    <div class="mb-3">
                                                        For linux users, the currently logged in user should have read and write access the serial port over USB. On most Linux
                                                        distributions, this is done by adding the user to dialout group with the following command:
                                                        <div class="command-snippet"> usermod -a -G dialout $USER </div>
                                                        on Arch Linux this is done by adding the user to uucp group with the following command:
                                                        <div class="command-snippet"> sudo usermod -a -G uucp $USER </div>
                                                        Make sure you re-login to enable read and write permissions for the serial port.
                                                    </div>
                                                </div>
                                                <div class="col-xs-12 mt-2">
                                                    <h4 class="topic mb-2" style="font-size: 14px;"><b>Browser Compatability
                                                            Issue</b></h4>
                                                    <p>
                                                        <span style="color: #e63f36">
                                                            This tool is not supported on Safari & Firefox browsers yet!
                                                        </span>
                                                        Please try using another browser like
                                                        <strong>Google Chrome</strong> with supported version.
                                                    </p>
                                                    <p>
                                                        ESP Launchpad makes use of <strong>Web Serial API</strong> to
                                                        communicate with the device. Currently Safari & Firefox browsers
                                                        don't support it yet. We will add support for this browser as soon
                                                        as Safari & Firefox starts supporting Web Serial API. Please find
                                                        more about <strong>Web Serial API</strong> browser compatability
                                                        guide
                                                        <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Serial_API#browser_compatibility"
                                                            target="_blank">here</a>
                                                    </p>
                                                </div>
                                                <div class="col-xs-12 mt-2">
                                                    <h4 class="topic mb-2" style="font-size: 14px;"><b>Device Compatability
                                                            Issue</b></h4>
                                                    <p>
                                                        If you are using older devices or older versions of device then
                                                        sometimes you may face an issue in
                                                        connection establishing step or firmware flashing step. Please try
                                                        that steps by pressing boot
                                                        button provided on device.
                                                    <details>
                                                        <summary>List of devices that supported by ESP Launchpad</summary>
                                                        <ol>
                                                            <li>ESP32</li>
                                                            <li>ESP32-C3</li>
                                                            <li>ESP32-C6</li>
                                                            <li>ESP32-H2</li>
                                                            <li>ESP32-S2</li>
                                                            <li>ESP32-S3</li>
                                                            <li>ESP8266</li>
                                                        </ol>
                                                    </details>
                                                    </p>
                                                </div>
                                                <div class="col-xs-12 mt-2" id="browserSupport">
                                                    <h4 class="topic mb-2" style="font-size: 14px;"><b>Driver Compatability
                                                            Issue</b></h4>
                                                    <p>
                                                        It has been seen that on <strong>windows system</strong> with latest
                                                        <strong>Silicon Lab CP210x USB
                                                            to UART Bridge</strong>
                                                        there are device connection or flashing issues.We are looking into
                                                        it to resolve the issue.
                                                        You can still try by downgrading silicon lab CP210x USB to UART
                                                        Bridge driver version to
                                                        <code>6.7.x</code> that can resolve issue on temporarily basis.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <hr />
                                        <div style="text-align: center;">
                                            <p>If you still unable to troubleshoot the problem or face any other issues
                                                please report them on <a
                                                    href="https://github.com/espressif/esp-launchpad/issues"
                                                    target="_blank">ESP launchpad Issues</a></p>
                                            <p>We will be happy to help you resolve your issues !</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-top-0">
                    <div class="field-container" data-toggle="tooltip" data-bs-placement="top"
                        title="You can wait some more time, and we'll continue to attempt the connection"
                        style="display: inline-block">
                        <button type="button" class="app-button btn btn-outline-primary" data-bs-dismiss="modal"
                            id="waitButton">
                            Wait For Connection
                        </button>
                    </div>
                    <div class="field-container" data-toggle="tooltip" data-bs-placement="top"
                        title="You can try it again !" style="display: inline-block">
                        <button type="button" class="app-button btn btn-outline-dark" onClick="window.location.reload();">
                            Try Again
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal for error troubleshoot ends-->

    <div id="main" class="maincontainer container">
        <!-- Responsive navbar-->
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <h4 class="topic" data-target-tab-panel-id="about">
                    <img src="../assets/logo-v1.png" class="logo" />
                </h4>
            </div>
        </nav>
        <div class="container" id="alert-container" style="display: none;">
            <div class="text-center mt-3 intro-text">
                <div class="alert alert-warning alert-dismissible fade show" role="alert">
                    <label style="display:none" id="lblConnTo"></label>
                </div>
            </div>
        </div>
        <div
            style="position: absolute;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            text-align: center;
            display: flex; flex-direction: column; align-items: center;">
            <!-- App Icon and Name Section -->
            <div id="appIconWithNameContainer" style="display: none; margin-bottom: 20px;">
                <div style="margin-bottom: 10px; display: none;" id="appIconDiv">
                    <img id="appIcon" src="" alt="App Icon"
                        style="max-width: 150px; max-height: 150px; object-fit: contain;">
                </div>
                <div>
                    <a href="#" id="appNameLink" role="button" data-bs-toggle="offcanvas"
                        data-bs-target="#offcanvasRight" aria-controls="offcanvasRight"
                        style="font-size: 18px; font-weight: 500; text-decoration: none;">
                        <span id="appName"></span>
                    </a>
                </div>
            </div>
            <!-- Connect Button -->
            <button class="connectButton" id="connectButton" tabindex="0" type="button" disabled>Connect Your
                Device<span class="span-svg"><svg class="svg" focusable="false" aria-hidden="true" viewBox="0 0 24 24"
                        data-testid="EastIcon">
                        <path fill="#FFFFFF" d="m15 5-1.41 1.41L18.17 11H2v2h16.17l-4.59 4.59L15 19l7-7-7-7z"></path>
                    </svg></span></button>
        </div>
        <div id="spinner" style="display: none; position: absolute; top: 50%;">
            <div>
                <div class="spinner-grow text-secondary bg-opacity-25" role="status">
                    <span class="sr-only"></span>
                </div>
                <div class="spinner-grow text-secondary bg-opacity-50" role="status">
                    <span class="sr-only"></span>
                </div>
                <div class="spinner-grow text-secondary bg-opacity-75" role="status">
                    <span class="sr-only"></span>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row split">
                <div class="productinfocontainer" id="productInfoContainer">
                    <div id="message" style="display: none"></div>
                </div>
                <div class="col-12 terminalcontainer" style="overflow: hidden; display: none;" id="terminalContainer">
                        <div class="button-container text-end mb-sm-3">
                            <div class="field-container" data-toggle="tooltip" data-placement="right"
                                title="Restart your device" style="display: inline-block">
                                <button type="button" class="app-button btn btn-outline-dark" id="consoleStartButton"
                                    disabled>
                                    Restart Device
                                </button>
                            </div>
                        </div>
                        <div id="terminal"><span class="devicelog">Device Console</span></div>
                        <div id="commandForm" style="display: none;">
                            <textarea rows="1" class="form-control rounded-0 shadow-none" autocomplete="off" id="commandInput"
                                placeholder="Type your command and press enter" style="font-size: 14px; font-family: monospace;" disabled></textarea>
                        </div>
                </div>
            </div>
        </div>

        <!-- Offcanvas for Application Information -->
        <div class="offcanvas offcanvas-end w-50" tabindex="-1" id="offcanvasRight"
            aria-labelledby="offcanvasRightLabel">
            <div class="offcanvas-body">
                <div id="appInfo"></div>
            </div>
        </div>
    </div>

    <!-- Safari & FireFox not supported error message-->
    <div id="unsupportedBrowserErr" style="display: none">
        <p align="center" style="color: red">
            This tool is not supported on Safari & Firefox browsers yet! Please try
            using another browser like Google Chrome.
            <br />
            <br />
            ESP Launchpad makes use of WebUSB to communicate with the device.
            Currently Safari & Firefox browsers don't support it yet. We will add
            support for this browser as soon as Safari & Firefox starts supporting
            WebUSB.
        </p>
    </div>


    <!-- Third party libraries-->
    <script src="../node_modules/xterm/lib/xterm.js"></script>
    <script src="../node_modules/xterm-addon-fit/lib/xterm-addon-fit.js"></script>
    <script src="../node_modules/crypto-js/crypto-js.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.0.3/pako.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/2.1.0/showdown.min.js"></script>

    <script src="./minimal_ui_index.js" type="module"></script>
    <!-- Bootstrap core JS-->
    <script src="../js/jquery.min.js"></script>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script src="../js/qrcode.min.js"></script>
</body>

</html>